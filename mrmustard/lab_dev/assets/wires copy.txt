<%
    border_ob = "4px solid black" if wires.output.bra else "2px solid gainsboro"
    border_ib = "4px solid black" if wires.input.bra else "2px solid gainsboro"
    border_ok = "4px solid black" if wires.output.ket else "2px solid gainsboro"
    border_ik = "4px solid black" if wires.input.ket else "2px solid gainsboro"

    color_ob = "black" if wires.output.bra else "gainsboro"
    color_ib = "black" if wires.input.bra else "gainsboro"
    color_ok = "black" if wires.output.ket else "gainsboro"
    color_ik = "black" if wires.input.ket else "gainsboro"

    n_modes = len(wires.modes) if len(wires.modes) < 10 else 10

    modes_ob = ", ".join(str(s) for s in list(wires.output.bra.modes)[:n_modes])
    modes_ib = ", ".join(str(s) for s in list(wires.input.bra.modes)[:n_modes])
    modes_ok = ", ".join(str(s) for s in list(wires.output.ket.modes)[:n_modes])
    modes_ik = ", ".join(str(s) for s in list(wires.input.ket.modes)[:n_modes])

    width_wires = 5.5 * len(modes_ik)
    out_start = 108+width_wires
%>

<style>
  .container-wires {
    position: relative;
    width: 100%;
    height: 200px;
    margin-left: 20px;
    display: flex;
  }
  .square {
    position: absolute;
    width: 100px;
    height: 100px;
    top: 10px;
    border: 4px solid red;
    flex: 1;
  }

  .leg {
  }
  .in {
    width: ${width_wires};
    flex: 1;
  }
  .out {
    width: ${width_wires}px;
    flex: 1;
  }
  .bra {
    top: 90px;
  }
  .ket {
    top: 35px;
  }

  .text {
    font-family: "Times New Roman"
  }
  .text.type {
    position: relative;
    padding: 3px;
    width: 100%;
  }
  .text.modes {
    font-size: 13px;
    position: relative;
    left: 0px;
    padding: 3px;
    width: 100%;
    transform: translateY(-68px);
  }
</style>

<body>
<h1>Wires</h1>
<div class="container-wires">
  <div class="in">
    <div class="leg in bra" style="border-top: ${border_ib}">
      <p class="text type">
        in bra
      </p>
      <p class="text modes">
        ${modes_ib}
      </p>
    </div>
    <div class="leg in ket" style="border-top: ${border_ik}">
      <p class="text type">
        in ket
      </p>
      <p class="text modes">
        ${modes_ik}
      </p>
    </div>
  </div>
  <div class="square"></div>
  <div class="out"></div>

  <div class="leg out bra" style="border-top: ${border_ob}">
    <p class="text type">
      out bra
    </p>
    <p class="text modes">
      ${modes_ob}
    </p>
  </div>
  <div class="leg in bra" style="border-top: ${border_ib}">
    <p class="text type">
      in bra
    </p>
    <p class="text modes">
      ${modes_ib}
    </p>
  </div>
  <div class="leg out ket" style="border-top: ${border_ok}">
    <p class="text type">
      out ket
    </p>
    <p class="text modes">
      ${modes_ok}
    </p>
  </div>
  <div class="leg in ket" style="border-top: ${border_ik}">
    <p class="text type">
      in ket
    </p>
    <p class="text modes">
      ${modes_ik}
    </p>
  </div>
</div>
</body>
